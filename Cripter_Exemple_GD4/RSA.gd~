@tool
extends Node

var data = """
THE KEY PAIRS FOR THIS DEMO WERE CREATED USING THE FOLLOWING COMMANDS:
ssh-keygen -t rsa -b 4096 -C "cripter_exemple"
ssh-keygen -f id_rsa.pub -m 'PEM' -e > id_rsa.pem
"""

var cripter = Cripter.new()

var password := "12345"
var key = "My not secret key"
var cbc_input = var2bytes("aaaaa")

@export_global_file("*.key") var private_key = "res://rsa.key"
@export_global_file("*.pem", "*.pub") var public_key = "res://rsa.pem"

func _ready():
	var private_key_path = ProjectSettings.globalize_path(String(private_key))
	var public_key_path = ProjectSettings.globalize_path(String(public_key))
	print(private_key_path)
	print(public_key_path)

	var not_encrypted = var2bytes(data)
	print(not_encrypted.size(), " => ",not_encrypted)
	var encrypted = cripter.encrypt_RSA(not_encrypted, public_key_path)
	print(encrypted.size(), " -> ",encrypted)

#	var dencrypted = cripter.decrypt_RSA(not_encrypted, private_key_path)
	
	get_tree().quit()
